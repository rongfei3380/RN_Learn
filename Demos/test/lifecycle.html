<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React组件的生命周期</title>
    <script type="text/javascript" src="reactKit/react.js"></script>
    <script type="text/javascript" src="reactKit/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>
</head>
<body>
<div id="exmple"></div>
<script type="text/babel">
    var HelloMessage = React.createClass({
        // 1.创建阶段
        getDefaultProps:function () {
            console.log("getDefaultProps");
            return {};
        },
        // 2.实例化阶段
        getInitialState:function () {
            console.log("getInitialState");
            return {};
        },
        componentWillMount:function () {
            // 在render之前调用此方法
            // 业务逻辑的处理都应该放在这里，如对state的操作等
            console.log("componentWillMount");
        },
       render:function () {
           // 根据state值，渲染并返回一个虚拟DOM
           console.log("render");
           return <h1 style={{color:'#ff0000', fontsize:'24px'}}>Hello {this.props.name}!我是chengfeir</h1>;
           // 这是注释 React.createClassElement
       },
        componentDidMount:function () {
          // 该方法发生在render方法之后
          // 在该方法中，ReactJS会使用render方法返回的虚拟DOM对象来创建真实的DMO结构
          // 组件内部可以通过this.getDOMNode()来获取当前组件的节点
            console.log("componentDidMount");
        },
        // 3.更新阶段，主要发生在用户操作之后或父组件有更新的时候，此时会根据用户的操作行为进行相应的页面结构调整
        componentWillReceiveProps:function () {
          // 该方法发生在this.props 被修改或父组件调用setProps()方法之后
          //   调用this.setState方法来完成对state的修改
          console.log("componentWillReceiveProps");
        },
        shouldComponentUpdate:function () {
            // 用来拦截新的props或state，根据逻辑来判断
            // 是否需要更新
            console.log("shouldComponentUpdate");
            return true;
        },
        componentWillUpdate:function () {
            // shouldComponentUpdate返回true的时候执行
            // 组件将更新
            console.log("componentWillUpdate")
        },
        componentDidUpdate:function () {
          // 组件更新完毕，我们常在这里做一些DOM
            console.log("componentDidUpdate");
        },

        // 4.销毁阶段
        componentWillUnmount:function () {
          // 销毁时被调用，通常做一些取消事件绑定 移除虚拟DOM中对应的组件数据结构、销毁一些无效的定时器等工作
            console.log("componentWillUnmount");
        },
    });

    ReactDOM.render(<HelloMessage name="React 语法基础"/>, document.getElementById("exmple") );
</script>
</body>
</html>